# E-커머스 서비스 ERD

**📚 문서 목록**

+ [1️⃣ 요구사항 분석 문서](01.Requirements.md)
+ [2️⃣ 마일스톤 문서](02.Milestones.md)
+ [3️⃣ 시퀀스 다이어그램 문서](03.SequenceDiagram.md)
+ [4️⃣ ERD 문서](04.ERD.md)
+ [5️⃣ API 명세](05.ApiDocument.md)

---

## ERD 작성
```mermaid
erDiagram
    USER ||--o| BALANCE : has
    USER ||--o{ USER_COUPON: owns
    USER ||--o{ ORDERS: ordered
    COUPON ||--o{ USER_COUPON: issued
    USER_COUPON ||--o{ ORDERS: used
    ORDERS ||--|{ ORDER_PRODUCT: has
    PRODUCT ||--o{ ORDER_PRODUCT: ordered
    ORDER_PRODUCT ||--o{ ORDER_PRODUCT_STATS: aggregated

    USER {
        BIGINT user_id PK "사용자 ID"
        VARCHAR nickname "닉네임"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    BALANCE {
        BIGINT user_id PK "사용자 ID"
        BIGINT amount "잔고 금액"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    COUPON {
        BIGINT coupon_id PK "쿠폰 ID"
        VARCHAR name "이름"
        FLOAT discount_rate "할인율"
        TIMESTAMP expired_at "만료일시"
        INT quantity "수량"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    USER_COUPON {
        BIGINT user_coupon_id PK "사용자 쿠폰 ID"
        BIGINT user_id FK "사용자 ID"
        BIGINT coupon_id FK "쿠폰 ID"
        VARCHAR coupon_status "쿠폰 상태"
        TIMESTAMP issued_at "발급일시"
        TIMESTAMP used_at "사용일시"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    PRODUCT {
        BIGINT product_id PK "상품 ID"
        VARCHAR name "이름"
        BIGINT price "가격"
        INT stock "재고 수"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    ORDERS {
        BIGINT order_id PK "주문 ID"
        BIGINT user_id FK "사용자 ID"
        BIGINT user_coupon_id FK "사용자 쿠폰 ID"
        BIGINT total_price "주문 총 금액"
        BIGINT discount_price "할인 금액"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    ORDER_PRODUCT {
        BIGINT order_product_id PK "주문 상품 ID"
        BIGINT order_id FK "주문 ID"
        BIGINT product_id FK "상품 ID"
        INT quantity "상품 개수"
        BIGINT unit_price "상품 단가 금액"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    ORDER_PRODUCT_STATS {
        BIGINT product_id PK "상품 ID"
        DATE stat_date PK "통계 일자"
        INT sale_count "판매 개수"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

```