# E-커머스 서비스 ERD

**📚 문서 목록**

+ [1️⃣ 요구사항 분석 문서](01.Requirements.md)
+ [2️⃣ 마일스톤 문서](02.Milestones.md)
+ [3️⃣ 시퀀스 다이어그램 문서](03.SequenceDiagram.md)
+ [4️⃣ ERD 문서](04.ERD.md)
+ [5️⃣ API 명세](05.ApiDocument.md)

---

## ERD 작성
```mermaid
erDiagram
    USERS ||--o| BALANCE : ""
    BALANCE ||--|{ BALANCE_TRANSACTION : ""
    USERS ||--o{ USER_COUPON: ""
    USERS ||--o{ ORDERS: ""
    COUPON ||--o{ USER_COUPON: ""
    ORDERS }o--|| USER_COUPON : ""
    ORDERS ||--|{ ORDER_PRODUCT: ""
    PRODUCT ||--o{ ORDER_PRODUCT: ""
    PRODUCT ||--o| PRODUCT_STOCK : ""
    PRODUCT ||--o{ PRODUCT_RANK: ""

    USERS {
        BIGINT user_id PK "사용자 ID"
        VARCHAR nickname "닉네임"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    BALANCE {
        BIGINT balance_id PK "잔고 ID"
        BIGINT user_id FK,UK "사용자 ID"
        BIGINT amount "잔고 금액"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    BALANCE_TRANSACTION {
        BIGINT transaction_id PK "거래 ID"
        BIGINT balance_id FK "잔고 ID"
        VARCHAR transaction_type "거래 타입"
        BIGINT amount "거래 금액"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    COUPON {
        BIGINT coupon_id PK "쿠폰 ID"
        VARCHAR name "이름"
        VARCHAR coupon_status "쿠폰 상태"
        FLOAT discount_rate "할인율"
        TIMESTAMP expired_at "만료일시"
        INT quantity "수량"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    USER_COUPON {
        BIGINT user_coupon_id PK "사용자 쿠폰 ID"
        BIGINT user_id FK "사용자 ID"
        BIGINT coupon_id FK "쿠폰 ID"
        VARCHAR used_status "사용 상태"
        TIMESTAMP issued_at "발급일시"
        TIMESTAMP used_at "사용일시"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    PRODUCT {
        BIGINT product_id PK "상품 ID"
        VARCHAR name "이름"
        BIGINT price "가격"
        VARCHAR product_status "상품 상태"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    PRODUCT_STOCK {
        BIGINT stock_id PK "재고 ID"
        BIGINT product_id FK "상품 ID"
        INT quantity "재고 개수"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    PRODUCT_RANK {
        BIGINT rank_id PK "랭킹 ID"
        BIGINT product_id FK "상품 ID"
        DATE rank_date "랭킹 일자"
        VARCHAR rank_type "랭킹 타입"
        BIGINT score "랭킹 점수"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    ORDERS {
        BIGINT order_id PK "주문 ID"
        BIGINT user_id FK "사용자 ID"
        BIGINT user_coupon_id FK "사용자 쿠폰 ID"
        VARCHAR order_status "주문 상태"
        BIGINT total_price "주문 총 금액"
        BIGINT discount_price "할인 금액"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }

    ORDER_PRODUCT {
        BIGINT order_product_id PK "주문 상품 ID"
        BIGINT order_id FK "주문 ID"
        BIGINT product_id FK "상품 ID"
        INT quantity "상품 개수"
        BIGINT unit_price "상품 단가 금액"
        TIMESTAMP created_at "생성일시"
        TIMESTAMP updated_at "수정일시"
    }
```