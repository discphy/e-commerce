# E-커머스 서비스 요구사항 분석

**📚 문서 목록** 

+ [1️⃣ 요구사항 분석 문서](01.Requirements.md)
+ [2️⃣ 마일스톤 문서](02.Milestones.md)
+ [3️⃣ 시퀀스 다이어그램 문서](03.SequenceDiagram.md)
+ [4️⃣ ERD 문서](04.ERD.md)
+ [5️⃣ API 명세](05.ApiDocument.md)

---

<!-- TOC -->
* [E-커머스 서비스 요구사항 분석](#e-커머스-서비스-요구사항-분석)
  * [요약 (Summary)](#요약-summary)
  * [요구사항 (Requirements)](#요구사항-requirements)
    * [잔고 (Balance)](#잔고-balance)
    * [상품 (Product)](#상품-product)
    * [쿠폰 (Coupon)](#쿠폰-coupon)
    * [주문 및 결제 (Order)](#주문-및-결제-order)
    * [주문 상품 통계 (OrderProduct)](#주문-상품-통계-orderproduct)
<!-- TOC -->

## 요약 (Summary)

사용자는 상품 주문에 필요한 메뉴들을 조회하고, 메뉴들을(여러개) 선택하여 주문 및 결제한다.    
이 때 사용자들은 미리 충전한 포인트를 사용하며, 잔액을 충전 및 조회할 수 있어야 한다.

또한, 쿠폰 목록을 조회하고, 선착순으로 발급이 가능해야하며  
주문 시, 쿠폰을 사용하면 전체 주문금액에 대한 할인 혜택을 받을 수 있다.

마지막으로는, 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 제공해야 한다.

## 요구사항 (Requirements)

### 잔고 (Balance)

**✅ 기능적 요구사항**

+ [ ] 사용자 식별자를 통해 잔액을 조회한다.
+ [ ] 잔액이 존재하지 않을 시, 0을 반환한다. (`empty`의 개념)
+ [ ] 사용자 식별자와 충전할 금액을 받아 잔액을 충전한다.
+ [ ] 잔액 충전 시, 데이터가 존재하지 않으면 생성 그렇지 않으면 수정을 진행한다.
+ [ ] 잔액 충전 시, 최대 금액인 1,000만원을 넘기면 안된다.

**☑️ 비기능적 요구사항**

+ [ ] 금액 충전은 동시성이 보장되어야 한다. (다중 인스턴스 환경 고려)

**📥 백로그**

+ [ ] 잔고 이력 관리 기능 
+ [ ] 잔고 상태 관리 (거래중지, 거래가능 등)

### 상품 (Product)

**✅ 기능적 요구사항**

+ [ ] 상품 정보 (ID, 상품이름, 상품가격, 재고 수) 목록을 조회한다.

**☑️ 비기능적 요구사항**

+ [ ] 조회 시점에, 상품별 잔여수량은 정확해야 한다. (동시성 고려, 캐싱 주의)

**📥 백로그**

+ [ ] 상품 판매 상태 관리 
+ [ ] 상품 이력 관리 
+ [ ] 상품 타입 및 카테고리 관리

### 쿠폰 (Coupon)

**✅ 기능적 요구사항**

+ [ ] 사용자 식별자와 쿠폰 식별자를 받아 선착순 쿠폰을 발급한다.
+ [ ] 발급 시에는, 쿠폰의 수량과 만료일시가 유효해야 한다.
+ [ ] 보유 쿠폰 정보 (ID, 쿠폰이름, 할인율, 만료기간) 목록을 조회한다.

**☑️ 비기능적 요구사항**

+ [ ] 쿠폰 발급 시 동시성이 보장되어야 한다. (공정모드 - 순서보장)

**📥 백로그**

+ [ ] 쿠폰 할인 타입 적용 (상품 별, 주문 별, 결제 방법 별 등)

### 주문 및 결제 (Order)

**✅ 기능적 요구사항**

+ [ ] 사용자 식별자와 상품 정보(상품 ID, 수량) 목록과 쿠폰정보를 받아 주문하고 결제한다.
+ [ ] 상품 재고는 충분해야 한다. 
+ [ ] 쿠폰 사용 시, 사용가능한 쿠폰이여야한다.
+ [ ] 잔고는 충분해야 한다. 
+ [ ] 상품 재고 차감, 잔고 차감, 쿠폰 사용 순으로 수행 후 주문을 생성 후 저장한다.
+ [ ] 주문/결제 완료 시, 외부 데이터 플랫폼으로 주문을 전송한다.

**☑️ 비기능적 요구사항**

+ [ ] 주문 실패 시, 트랜잭션 보장이 필요하다. 
+ [ ] 외부 데이터 플랫폼 주문 정보 전송은 Mock 처리 한다.
+ [ ] 재고 관리 및 잔액 처리가 정상적이도록 동시성 보장이 필요하다.

**📥 백로그**

+ [ ] 주문 이력 관리 
+ [ ] 주문 상태 관리

### 주문 상품 통계 (OrderProduct)

**✅ 기능적 요구사항**

+ [ ] 주문 및 결제가 완료된 최근 3일간 가장 많이 팔린 상위 5개 상품 정보 목록을 조회한다.
+ [ ] 일 배치를 통한 집계성 데이터 저장

**☑️ 비기능적 요구사항**

+ [ ] 배치 스케줄러를 통한 주문상품 통계
+ [ ] 성능으로 인한 캐싱 고려 필요 (실시간 성 데이터가 아니기 때문에)


> 추가로, 사용자 로그인 프로세스를 구축하여 JWT 토큰으로 사용자 검증을 포함한 API 디자인도 할 수 있다. 